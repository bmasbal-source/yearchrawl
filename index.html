<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>YouTube OCR Daily</title>

  <!-- Firebase JS SDKs for App, Auth, Firestore -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

  <!-- Bootstrap CSS for styling -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <!-- Load custom CSS -->
  <link href="css/style.css" rel="stylesheet" />
</head>
<body>

  <!-- Background curved shapes for design -->
  <div class="background-shapes">
    <svg class="shape1" viewBox="0 0 400 400" preserveAspectRatio="none">
      <path fill="#DDBEA9" d="M0,0 Q100,200 400,100 L400,400 L0,400 Z" />
    </svg>
    <svg class="shape2" viewBox="0 0 400 400" preserveAspectRatio="none">
      <path fill="#A3B18A" d="M400,0 Q300,250 0,100 L0,0 Z" />
    </svg>
    <svg class="shape3" viewBox="0 0 400 400" preserveAspectRatio="none">
      <path fill="#FFE8D6" d="M0,400 Q200,300 400,400 L400,0 L0,0 Z" />
    </svg>
  </div>

  <!-- Login View -->
  <div id="login-view" class="container" style="display:none;">
    <h1 class="large-title">YouTube OCR Daily</h1>
    <div class="text-center">
      <button id="signin-btn" class="btn btn-earth btn-lg">Sign in with Google</button>
    </div>
  </div>

  <!-- Main menu view for logged-in users -->
  <div id="main-menu" class="container" style="display:none;">
    <div class="top-bar mb-3">
      <div><span id="user-email" class="fw-bold"></span></div>
      <div class="account-menu">
        <button class="btn btn-earth-outline btn-sm me-2">☰ Account</button>
        <div class="account-dropdown">
          <label for="modal-filler-dict">Filler Phrase Dictionary (comma-separated):</label>
          <textarea id="modal-filler-dict" placeholder="Enter filler words here..."></textarea>
          <button id="modal-filler-save" class="btn btn-earth btn-sm w-100 mb-2">Save Filler Dictionary</button>
          <button id="signout-btn" class="btn btn-earth-outline btn-sm w-100">Sign Out</button>
        </div>
      </div>
    </div>

    <h2 class="large-title">YouTube OCR Daily Search Phrases</h2>

    <!-- 20 search phrase input boxes -->
    <div id="search-phrase-list" class="mb-3"></div>

    <div class="d-flex gap-3 mb-3 flex-wrap align-items-center">
      <button id="edit-phrases-btn" class="btn btn-earth-outline flex-grow-1 flex-md-grow-0">Edit Phrases</button>
      <button id="save-phrases-btn" class="btn btn-earth flex-grow-1 flex-md-grow-0">Save Phrases</button>

      <!-- New checkbox to toggle using filler phrases -->
      <div class="form-check ms-md-3">
        <input class="form-check-input" type="checkbox" id="use-filler-phrases" />
        <label class="form-check-label" for="use-filler-phrases">
          Include Filler Phrases
        </label>
      </div>
    </div>

    <h3 class="section-title">Search Preferences</h3>
    <div class="mb-3 row gx-2 gy-2 align-items-center">
      <label for="date-from" class="col-sm-3 col-form-label form-label">Published After (YYYY-MM-DD or YYYYMMDD)</label>
      <div class="col-sm-4">
        <input type="text" id="date-from" class="form-control rounded-pill input-earth" placeholder="Start date" />
      </div>
    </div>

    <div class="mb-3 row gx-2 gy-2 align-items-center">
      <label for="date-to" class="col-sm-3 col-form-label form-label">Published Before (YYYY-MM-DD or YYYYMMDD)</label>
      <div class="col-sm-4">
        <input type="text" id="date-to" class="form-control rounded-pill input-earth" placeholder="End date" />
      </div>
    </div>

    <div class="mb-3 d-flex flex-wrap gap-3 align-items-center">
      <label class="form-label me-3 mb-0">Video Length:</label>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" id="video-short" />
        <label class="form-check-label" for="video-short">Short</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" id="video-medium" />
        <label class="form-check-label" for="video-medium">Medium</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="checkbox" id="video-long" />
        <label class="form-check-label" for="video-long">Long</label>
      </div>
    </div>
    <div class="mb-3 form-check">
      <input class="form-check-input" type="checkbox" id="age-restricted" />
      <label class="form-check-label" for="age-restricted">Only Age Restricted</label>
    </div>
    <div>
      <label for="ocr-phrases" class="form-label">OCR Search Phrases (comma or space separated, max 100):</label>
      <textarea id="ocr-phrases" rows="2" class="form-control rounded-pill input-earth" placeholder="Type OCR phrases here..."></textarea>
      <button id="save-ocr-btn" class="btn btn-earth btn-sm mt-2">Save OCR Phrases</button>
    </div>
    <div class="mt-4 d-flex flex-wrap justify-content-between align-items-center gap-2">
      <button id="run-scheduled-btn" class="btn btn-earth btn-lg rounded-pill flex-grow-1 flex-md-grow-0">Run Scheduled Search</button>
      <span class="status-msg" id="run-scheduled-status"></span>
      <span class="fw-bold">Tokens remaining: <span id="token-count">—</span></span>
    </div>
    <div id="backend-log" style="margin-top: 1rem; padding: 0.5rem; border: 1px solid #ccc; background-color: #f9f9f9;">
      <!-- Backend search log will be rendered here -->
    </div>
    <h3 class="section-title mt-5">Daily OCR Hits</h3>
    <div id="hit-list" class="hit-list"></div>
  </div>

  <!-- Update script tag to use type="module" so imports are recognized -->
  <script type="module" src="js/main.js"></script>

</body>
</html>













